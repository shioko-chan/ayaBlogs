{% extends 'auth.html' %}
{% block mainbox %}
<h2 class="text-2xl font-semibold text-gray-800 mb-6">注册</h2>
<form action="#" id="email-form">
  <div class="mb-4" id="email-div">
    <label for="email" class="block text-sm font-medium text-gray-700"><span class="font-semibold">邮箱</span></label>
    <div class="flex flex-row w-full justify-between items-center">
      <input id="email" type="email" name="email"
        class="w-full mt-1 block px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
        required />
      <button type="button" id="code-get-button"
        class="w-32 text-white bg-blue-500 font-semibold rounded-lg ml-1 p-2 text-sm">获取验证码</button>
    </div>
  </div>
  <div class="mb-4" id="code-div">
    <label for="code" class="block text-sm font-medium text-gray-700"><span class="font-semibold">验证码</span></label>
    <input id="code" type="tel" maxlength="6" minlength="6" name="code"
      class="w-full mt-1 block px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
      required />
  </div>
  <div class="g-recaptcha" data-sitekey="{{ site_key }}"></div>
  <br />
  <button type="submit"
    class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-200">下一步</button>
</form>
<form action="#" method="POST" id="register-form" class="hidden">
  <div class="mb-4" id="username-div">
    <label for="username" class="block text-sm font-medium text-gray-700"><span class="font-semibold">用户名</span></label>
    <input id="username" type="text" name="username" maxlength="30"
      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
      required />
  </div>
  <div class="mb-4" id="password-div">
    <label for="password" class="block text-sm font-medium text-gray-700"><span class="font-semibold">密码</span></label>
    <input id="password" type="password" name="password"
      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
      required />
  </div>
  <div class="mb-6" id="retype-password-div">
    <label for="retype-password" class="block text-sm font-medium text-gray-700"><span
        class="font-semibold">重复密码</span></label>
    <input id="retype-password" type="password" name="retype-password"
      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
      required />
  </div>
  <button type="submit"
    class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-200">注册</button>
</form>
{% endblock %}

{% block script %}
<script>
  const emailValidateUrl = "{{ url_for('auth.validate') }}"
  const registerUrl = "{{ url_for('auth.register') }}"
  const mailSendInterval = '{{ mail_send_interval }}'
  const loginUrl = "{{ url_for('auth.login') }}"
</script>
<script type="text/javascript" src="{{ url_for('static', filename='js/register.js') }}"></script>
{% endblock %}